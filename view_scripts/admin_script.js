function viewArchive(){};function loadAuthenticatedPage(){const body=document.getElementsByTagName('body')[0];const root=document.getElementById('root');const pageNavBar=createPageNavBar();const footer=document.createElement('footer');document.head.innerHTML+=`\n    <style>\n      .a-tag:hover, #add-product-btn:hover {\n        text-decoration: underline;\n      }\n    </style>\n  `;body.insertBefore(pageNavBar,root);body.appendChild(footer);root.className='container mt-5 flex-grow-1';footer.className='bg-dark text-center text-white py-3 mt-auto';footer.innerHTML='<p>© 2025 Candiez Café. All rights reserved.</p>';redirect()}document.addEventListener('DOMContentLoaded',loadAuthenticatedPage);;function createCategoryButton(category,container){const button=document.createElement('div');const input=document.createElement('input');const label=document.createElement('label');input.type='radio';input.className='btn-check';input.name='btnradio';input.id=`btnradio${category['id']}`;input.autocomplete='off';input.setAttribute('onclick',`loadProducts(${category['id']})`);if(category['id']===1){input.setAttribute('checked','')}label.className='btn btn-outline-dark';label.setAttribute('for',`btnradio${category['id']}`);label.innerText=category['name'];container.appendChild(input);container.appendChild(label);return input}function createCategoryNavBar(categories){const categoryNavBar=document.createElement('div');categoryNavBar.className='btn-group';categoryNavBar.setAttribute('role','group');categoryNavBar.setAttribute('aria-label','Basic radio toggle button group');categoryNavBar.style.width='100%';categoryNavBar.style.marginBottom='1rem';categories.forEach((category=>{createCategoryButton(category,categoryNavBar)}));return categoryNavBar};function createFooter(){const footer=document.createElement('footer');footer.className='bg-dark text-center text-white py-3 mt-auto';footer.innerHTML=`<p>© 2025 Candiez Café. All rights reserved.</p>`;return footer};function viewHome(){console.log('Home view activated');const root=document.getElementById('root');const pageNavBar=createPageNavBar();document.getElementsByTagName('body')[0].insertBefore(pageNavBar,root)};function createPageNavBar(){const nav=document.createElement('nav');nav.className='navbar navbar-expand-lg navbar-dark bg-dark';nav.innerHTML=`\n    <a class="navbar-brand text-white ms-3 a-tag" href="#products">&nbsp;Candiez Café</a>\n      <button\n        class="navbar-toggler me-3"\n        type="button"\n        data-bs-toggle="collapse"\n        data-bs-target="#navbarNav"\n      >\n        <span class="navbar-toggler-icon"></span>\n      </button>\n      <div class="collapse navbar-collapse flex-lg-row-reverse mx-3" id="navbarNav">\n        <ul class="navbar-nav ml-auto">\n          <li class="nav-item ">\n            <button class="nav-link text-white" id="add-product-btn" type="button" data-bs-toggle="modal" data-bs-target="#product-modal">\n              Add Product\n              <span class="d-none d-lg-inline-block divider">\n                &nbsp;&nbsp;|\n              </span>\n            </button>\n          </li>\n          <li class="nav-item">\n            <a class="nav-link text-white a-tag" href="#products">\n              Products\n              <span class="d-none d-lg-inline-block divider">\n                &nbsp;&nbsp;|\n              </span>\n            </a>\n          </li>\n          <li class="nav-item">\n            <a class="nav-link text-white a-tag" href="#archive">\n              Archive\n              <span class="d-none d-lg-inline-block divider">\n                &nbsp;&nbsp;|\n              </span>\n            </a>\n          </li>\n          <li class="nav-item">\n            <a class="nav-link text-white a-tag" href="#logout">Logout</a>\n          </li>\n        </ul>\n      </div>\n  `;return nav}document.addEventListener('DOMContentLoaded',(()=>{const addProdBtn=document.getElementById('add-product-btn');addProdBtn.addEventListener('click',(()=>{location.href='#products'}))}));;function viewProducts(){const root=document.getElementById('root');root.innerHTML='';getProductCategories((categories=>{const productsDiv=document.createElement('div');const newProdModal=createProductModal(categories);const categoryNavBar=createCategoryNavBar(categories);productsDiv.id='products-div';categoryNavBar.id='category-nav-bar';root.appendChild(newProdModal);root.appendChild(categoryNavBar);root.appendChild(productsDiv);loadProducts(categories[0]['id'])}))}function loadProducts(categoryId){const root=document.getElementById('products-div');root.style=`\n      display: flex; \n      flex-wrap: wrap; \n      gap: 1rem; \n      padding: 1rem; \n      background-color: #f8f9fa; \n      border-radius: 0.5rem; \n      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n      margin-bottom: 1rem;\n      min-height: 65vh;\n      min-width: 100%;\n    `;root.className+=' justify-content-center justify-content-md-start';root.innerHTML='';getProducts(categoryId,true,false,(products=>{products.forEach((product=>{root.appendChild(createProductCard(product))}))}))};function htmlEncode(str){if(typeof str!=='string')return str;return str.replace(/&/g,'&amp;').replace(/"/g,'&quot;').replace(/'/g,'&#39;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}function createProductCard(product){const encodedProductData=htmlEncode(JSON.stringify(product));const productCard=document.createElement('div');productCard.className='product-card card';productCard.setAttribute('data-product',encodedProductData);productCard.style.width='20rem';productCard.style.height='30rem';productCard.style.cursor='pointer';const productImage=document.createElement('img');productImage.className='card-img-top bd-placeholder-img';productImage.style.width='100%';productImage.style.aspectRatio='1 / 1';productImage.style.objectFit='cover';productImage.style.borderBottom='2px solid #ddd';productCard.appendChild(productImage);productImage.alt=htmlEncode(product['name']||'Product Image');productImage.src=product['image']&&product['image_type']?`data:image/${product['image_type']};base64,${product['image']}`:'../docs/img-placeholder.jpg';const productCardBody=document.createElement('div');productCardBody.className='card-body';productCardBody.style.display='flex';productCardBody.style.flexDirection='column';productCardBody.style.height='100%';productCard.appendChild(productCardBody);const productName=document.createElement('h4');productName.className='card-title';productName.innerHTML=htmlEncode(product['name']||'Unnamed Product');productCardBody.appendChild(productName);const productDescription=document.createElement('p');productDescription.className='card-text text-wrap';productDescription.style.display='-webkit-box';productDescription.style.webkitLineClamp='3';productDescription.style.boxOrient='vertical';productDescription.style.webkitBoxOrient='vertical';productDescription.style.overflow='hidden';productDescription.innerHTML=htmlEncode(product['description']||'');productDescription.style.marginBottom='auto';productCardBody.appendChild(productDescription);const availability=document.createElement('p');availability.className='card-text';availability.style.marginTop='auto';availability.style.fontWeight='bold';if(product['is_available']){availability.innerHTML='Available';availability.style.color='green'}else{availability.innerHTML='Not Available';availability.style.color='red'}productCardBody.appendChild(availability);return productCard};function createModalBody(categories){const modalBody=document.createElement('div');modalBody.className='modal-body';modalBody.innerHTML=`\n    \x3c!-- Image Preview (Starts with Placeholder) --\x3e\n    <div id="img-img-container">\n    <div class="image-container">\n      <img\n        id="imagePreview"\n        src="../docs/img-placeholder.jpg"\n        alt="Image Preview"\n      />\n    </div>\n    </div>\n\n    \x3c!-- Upload Input --\x3e\n    <input\n      type="file"\n      id="imageUpload"\n      class="form-control mb-3"\n      accept="image/*"\n    />\n\n    \x3c!-- Name --\x3e\n    <input\n      type="text"\n      id="name"\n      class="form-control mb-3"\n      placeholder="Enter Name"\n    />\n\n    \x3c!-- Description --\x3e\n    <textarea\n      id="description"\n      class="form-control mb-3"\n      placeholder="Enter Description"\n    ></textarea>\n\n    \x3c!-- Category --\x3e\n    <select id="category" class="form-select mb-3">\n      <option value="-1" disabled selected>Select Category</option>\n      ${categories.map((category=>`<option value="${category['id']}">${category['name']}</option>`)).join('')}\n    </select>\n\n    \x3c!-- Availability --\x3e\n    <div class="form-check mb-3">\n      <input\n        type="checkbox"\n        class="form-check-input"\n        id="availability"\n        checked\n      />\n      <label class="form-check-label" for="availability">\n      <strong>Available</strong>\n      </label>\n    </div>\n    \n\n    <style>\n      #img-img-container {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-bottom: 1rem; /* Space between image and input */\n      }\n      /* Style for the image preview to maintain 1:1 aspect ratio */\n      .image-container {\n        width: 150px; /* Fixed width */\n        height: 150px; /* Fixed height */\n        overflow: hidden; /* Ensures cropping */\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        border: 2px solid #ccc;\n        border-radius: 10px; /* Optional rounded corners */\n      }\n\n      .image-container img {\n        width: 100%; /* Ensures full coverage */\n        height: 100%; /* Ensures full coverage */\n        object-fit: cover; /* Crops to the center */\n      }\n    </style>\n    <script>\n        document\n        .getElementById("imageUpload")\n        .addEventListener("change", function (event) {\n          const file = event.target.files[0];\n          console.log(file);\n\n          if (file) {\n            const reader = new FileReader();\n            reader.onload = function (e) {\n              const imagePreview = document.getElementById("imagePreview");\n              imagePreview.src = e.target.result;\n              imagePreview.onload = () => console.log("Image updated successfully!");\n              imagePreview.style.objectFit = "cover"; // Ensures only center portion is shown\n            };\n            reader.readAsDataURL(file);\n          }\n        });\n\n      // Function to Convert Image to Base64\n      function convertImageToBase64() {\n        const fileInput = document.getElementById("imageUpload");\n        const file = fileInput.files[0];\n\n        if (!file) {\n          alert("Please select an image.");\n          return;\n        }\n\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = function () {\n          const base64String = reader.result;\n          console.log("Base64 String:", base64String);\n\n          // Display updated preview\n          document.getElementById("imagePreview").src = base64String;\n        };\n      }\n    <\/script>\n  `;return modalBody}function createnewProdModalFooter(){const modalFooter=document.createElement('div');modalFooter.className='modal-footer';modalFooter.innerHTML=`\n    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>\n    <button type="button" class="btn btn-primary" id="save-product">Save</button>\n  `;return modalFooter}function createProductModal(categories,product=null){const modal=document.createElement('div');const modalDialog=document.createElement('div');const modalContent=document.createElement('div');const modalHeader=document.createElement('div');const modalBody=createModalBody(categories);const modalFooter=document.createElement('div');modal.className='modal fade';modal.id='product-modal';modal.setAttribute('data-bs-backdrop','static');modal.setAttribute('data-bs-keyboard','false');modal.setAttribute('tabindex','-1');modal.setAttribute('aria-labelledby','product-modal-label');modalDialog.className='modal-dialog modal-dialog-centered';modal.appendChild(modalDialog);modalContent.className='modal-content';modalDialog.appendChild(modalContent);modalHeader.className='modal-header';modalHeader.innerHTML=`<h1 class="modal-title fs-5" id="product-modal-label">${product?'Edit':'Add'} Product</h1>`;modalContent.appendChild(modalHeader);modalContent.appendChild(modalBody);modalFooter.className='modal-footer';modalFooter.innerHTML=`\n    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>\n    <button type="button" class="btn btn-primary" id="save-product">Save</button>\n  `;modalContent.appendChild(modalFooter);return modal}function clearModal(){};function logoutUser(){console.log('logging out');setAdminUserStatus(false,'','',(data=>console.log(data)),location.reload())}function redirect(){const hash=window.location.hash;console.log(hash);if(hash!==null){switch(hash){case'#archive':viewArchive();break;case'#logout':logoutUser();break;default:viewProducts();break}}Array.from(document.getElementsByClassName('a-tag')).forEach((link=>{link.addEventListener('click',(e=>{e.preventDefault();location.reload()}))}))};